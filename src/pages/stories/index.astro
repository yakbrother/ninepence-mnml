---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
const stories = await getCollection('stories');
const sortedStories = stories.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---
<BaseLayout title="Stories | mostly true">
  <h2>All Stories</h2>
  {sortedStories.map(story => (
    <div class="post">
      <div class="post-date">{new Date(story.data.date).toLocaleString('en-US', { month: 'short', year: 'numeric' })}</div>
      <div class="post-title"><a href={`/stories/${story.id}/`}>{story.data.title}</a></div>
      <div class="post-summary">{story.data.description}</div>
    </div>
  ))}
</BaseLayout> 