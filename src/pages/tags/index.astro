---
import { sanityClient } from 'sanity:client';
import BaseLayout from '../../layouts/BaseLayout.astro';
const stories = await sanityClient.fetch(`*[_type == "story" && !draft]`);
const tagSet = new Set<string>();
stories.forEach(story => {
  if (Array.isArray(story.tags)) {
    story.tags.forEach((tag: string) => tagSet.add(tag));
  }
});
const tags = Array.from(tagSet).sort();
---
<BaseLayout 
  title="tags | mostly true"
  description="Browse all story tags to discover topics and themes across Virgil Eaton's stories."
>
  <h1>All Tags</h1>
  <hr/>
  <div class="tag-list" style="flex-wrap: wrap; justify-content: center;">
    {tags.map((tag: string) => (
      <a href={`/tags/${encodeURIComponent(tag)}/`} class="tag">{tag.toLowerCase()}</a>
    ))}
  </div>
</BaseLayout> 